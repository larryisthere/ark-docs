# 可视化埋点

数据接入是使用数据分析平台的第一步，主要包括客户端埋点、服务端埋点和工具导入三类方法。其中，客户端埋点有三种方式：代码埋点、可视化埋点、无埋点（全埋点）。

不同方式有不同的优缺点，也有不同的使用场景，单一的埋点方式显然已经无法满足不同客户的诉求。因此，除了支持代码埋点之外，方舟新增了可视化埋点的方式，来减少代码埋点工程师的工作量，同时因其简单灵活、随时发布无需重新发版的特点，能够使得产品、运营等非技术人员能零门槛的根据业务需要直接在页面上定义事件，快速验证，极大提高获取数据的效率。

当然，可视化埋点也有其局限性存在，所以没有哪种方式最好，适合企业分析需要、满足业务需求才是最好的方式。想要了解更多各种埋点的差异，可以阅读方舟博客中[埋点系列文章](https://ark.analysys.cn/blog/%E4%B8%BA%E4%BA%86%E8%AE%B2%E6%98%8E%E7%99%BD%E5%9F%8B%E7%82%B9%E7%9A%84%E6%BC%94%E5%8F%98%E5%8F%B2%EF%BC%8C%E8%BF%99%E5%B8%AE%E6%8A%80%E6%9C%AF%E7%94%B7%E7%8C%AE%E5%87%BA%E5%B9%B4-2)。

## 使用前准备

开始使用可视化埋点之前，必须先按照 [SDK 指南](https://github.com/larryisthere/ark-docs/tree/03211ca894b85a2ac80a6540af9a600714d71d2c/docs/manual/sdk/README.md) 正确集成相应平台的SDK。

当已有回数时，就可以从 **管理 - 元事件** 页面的可视化埋点入口选择相应平台开始后可视化埋点。

> 暂不支持小程序的可视化埋点

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808121248172482.png)

移动端和 Web 端可视化埋点流程差异较大，以下将分别说明：

## 移动端 \(Android / iOS \) 可视化埋点

对移动端 APP 进行可视化埋点需要经过 4 个步骤：1. 连接设备 2. 选取设备 3. 可视化配置 4. 测试 & 部署

### 1. 连接设备

进入到连接设备页面后，在设备上打开您集成了 SDK 的应用，**摇一摇** 开始连接，当超出 3 分钟时间，还没有连接时，需要点击按钮`连接超时，重试连接`后，重新摇一摇连接。

> 注意：若进入该页面前已经打开了应用，请杀掉进程，重新打开。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808121327371463.gif)

### 2. 选取设备

连接成功后自动进入到选取设备页面，因为有时会有多台设备一起操作，所需要确认当前连接的设备名称和埋点的应用版本号，无误后，点击进入配置页面。

> 特殊情况：
>
> 当同一台设备连接到两个浏览器页面时 e.g. A 和 B，
>
> 选择连接了 A 页面上的设备时，B 页面上相同设备会变灰不可被点击；
>
> 当从 A 页面上点击断开连接时，B页面上也变灰，如需使用，需要重新连接。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808121328515454.png)

### 3. 可视化配置

选取相应设备后，进入配置页面，即可看到当前首页上的页面，想要对哪个页面进行埋点，就可以在手机上选择进入哪个页面，网站上会快速切换到新的页面，点击页面元素即可开始定义事件，右侧列表中会展示以埋点是事件，可以进行修改和删除。

打开高亮显示以定义元素时，即可看到当前页面中，有哪些已部署的事件，哪些是埋点了但未部署的；如果页面上埋点元素过多，相应的也会高亮显示出来很多元素，这时候如果再去创建一个新的埋点事件时，干扰元素比较多，也可以选择关闭高亮显示。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808122015074274.gif)

**Ⅰ 创建事件**

点击界面上的UI元素，即可弹出创建事件窗口，页面上会标识出当前选中的是哪个元素，以便于进一步校验选中的元素是否是实际想要埋点的元素，通过以下内容来定义该事件：

1. 事件ID：即事件的唯一标识，必填，仅支持字母、数字和下划线组成，且不能以数字开头
2. 事件名称：非必填项，但建议填写，方便在分析时查看
3. 限制条件：用于进一步约束事件，包含
4. 以下两项
   * 限制在当前页面 ：默认时选中状态，取消选中表示应用于所有页面

     > 部分元素会在多个页面上出现，如果需要让所有页面的这个元素被触发时，都上报到这个事件时，可以取消选中，例如，导航。

   * 限制在文本：xyz

     > 部分按钮上文本在不同中情况下会有变化，比如 `体验 Demo`这个按钮在登录前 显示`体验 Demo`，登录后变成`进入我的应用` ，如果要明确监测登录前点击这个按钮的情况时，就可以在登录前的情况下，勾选限制在文本，这时能自动获取到文本：体验 Demo ，用户只有点击 体验 Demo 的情况下，数据才会上报到定义的事件中。
5. 生效版本：默认仅当前版本生效

   > 随着版本迭代，有些元素可能在新老版本上有差异，支持选择仅在当前版本生效；当所定义的元素，在所有版本上都存在，且想要监测所有版本上，该元素的点击情况，则可以选择全部版本生效。

_点击确认，即可保存，但此时埋点的事件仅在调试设备上生效，只有部署后才对所有设备生效_。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808121700295983.png)

**Ⅱ 可视化埋点列表**

已经保存和部署的埋点都会显示在右侧列表中，当前页面可视化埋点和所有可视化埋点可以切换查看，列表显示：

* 事件部署状态，移入后标识提示：已部署 / 未部署 / 已修改未部署
* 事件名称，当没有填写事件名称时，会显示事件 ID
* 点击事件名称展开下拉展示更改信息：包括事件 ID、限制条件、生效版本

支持搜索关键词根据事件ID 、事件显示名称模糊搜索

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808122242169068.png)

**Ⅲ 修改埋点**

移入事件后，点击修改，打开编辑弹窗。

> 注：当前仅能在埋点的版本上对事件编辑和删除

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808122242253981.png)

确定修改后，埋点状态会变成已修改，修改需要部署后生效。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808122332491931.png)

**Ⅳ 删除埋点**

当删除未部署事件时，直接删除；

当删除已部署事件时，需要部署后才可以生效。

### 4. 测试 & 部署

点击 APP上已经埋点的位置，即可弹出埋点日志信息，用于验证埋点是否生效。

> 注意：可视化埋点测试模式下上报的数据平台，是否加入到正式数据中取决于debug属性的值

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808122339019984.png)

当测试完成，即可点击**部署**， 部署成功后，用户下次启动时，获取埋点规则，触发即可上报事件。

> 注意：
>
> 在可视化埋点的过程中，应用退到后台、网络状态比较差 、手机锁屏时，无法全选，页面胡遮罩提示，当重新连上时，恢复屏显；在网络不稳定、锁屏等情况下，可能会存在意外断开连接的情况，需要返回重新连接。

## Web / H5 可视化埋点详情页

Web / H5 可视化埋点需要 3 个步骤：1. 选择要埋点的页面 2. 可视化配置 3. 测试 & 部署

### 1. 选择要埋点的页面

输入需要进行可视化埋点的页面

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808122342136711.png)

### 2. 可视化配置

确认后进入配置页面，默认定义模式，可以收起左侧导航，使得页面大小符合原页面大小，更精准的埋点。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808211144205234.png)

**支持 Web 和 H5 两种模式的切换**

因为对于部分H5页面，显示在web端时，会和实际样式不一样，可以选择H5项，使得页面显示更符合实际情况

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808211144207454.png)

可以在配置页面切换 URL，输入后点击→ 切换页面

其他创建埋点事件、埋点显示列表、修改埋点和删除埋点类似移动端应用可视化埋点，所以，不一一说明。

> 当无法进行埋点时，可能是存在以下问题：
>
> 1. 页面没有集成方舟 SDK
> 2. 集成的 AppKey 不正确
> 3. 网站禁止了 iframe 的加载

### 3. 测试 & 部署

移动端可视化埋点定义时是在Web端，测试时，可以点击 APP 上的埋点触发；但 Web 端定义和点击触发都只能在 Web 页面上， 所以要进行测试时，需要点击进入测试模式，此时，点击埋点元素即可查看返回日志。

![ ](https://imguserradar.analysys.cn/fangzhou/img/2018/08/201808130006002759.png)

如有更多有关问题，请随时联系我们 **4006-010-231**。

[![ ](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901151711159657.jpeg)](https://ark.analysys.cn/view/sign/signup.html?campaign_id=2111486795&utm_campaign=文档注册&utm_medium=自媒体&utm_source=文档&utm_content=&utm_term=)

