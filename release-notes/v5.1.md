---
description: 发布于 2020年10月28日
---

# V5.1 升级可视化埋点、增强权限控制……

{% hint style="success" %}
**更新要点：**

1. 升级了可视化埋点，支持圈选属性、同级元素等，扩大了可视化圈选边界和效率
2. 整合了数据验证，更便捷高效地完成数据接入验证
3. 增强了权限控制粒度，满足金融级别的数据安全控制
4. 优化了分析、分群、运营环节具体场景的使用体验
{% endhint %}

## 数据接入和管理环节提效 <a id="shu-ju-jie-ru-huan-jie-ti-xiao"></a>

### 1. 升级了可视化埋点**，支持圈选属性、圈选同级元素等** <a id="1-ke-shi-hua-mai-dian-sheng-ji"></a>

{% page-ref page="../features/project-manegement/data-integration/virtualizer.md" %}

![](https://gblobscdn.gitbook.com/assets%2F-MLN13VkEI8JPPkUyQli%2F-MLuYsv3fvyb1hOf2Y2v%2F-MLub1ON6fclv0ng7Ee-%2Fimage.png?alt=media&token=d5923728-1e70-45e3-a702-c5be7981aed4)

#### 🎨 **支持了Hybrid APP 的可视化埋点**

> 也就是说如果你的APP中嵌入了H5页面，也可以给它埋点啦

#### 🎨 **支持了可视化圈选属性，扩大了可视化可采集的数据边界**

* 可以从页面圈选，用于添加动态属性值的属性
* 可以手动添加固定值，用于添加固定的属性，比如按钮所在页面、位置等

> 比如给网站导航埋点，点击导航定义为一个事件，圈选导航名称作为属性即可

#### 🎨 **支持根据文本、同级元素、同类型等条件选择限定为固定位置、相同名称元素、列表相同元素等快速埋点**

> 比如同样给网站导航埋点，原来有5个菜单，就需要定义5个事件，才能完成采集；V5.1开始只需要定义一个事件，再通过圈选属性，给事件添加属性菜单名称的属性即可

#### **🎨 优化若干细节**

1. 优化已圈选、可圈选、正在编辑的状态，更方便的识别各个元素的编辑状态
2. 优化埋点列表，非当前页面的埋点置于列表下方，并明确标识别
3. 优化埋点列表中已部署和未部署的标识，方便快速了解
4. 可视化埋点和埋点方案的同步
   1. 可视化埋点增删改后可自动同步到埋点方案
   2. 埋点方案修改了可视化埋点的事件名称和属性也支持同步到可视化埋点列表

### 2. 整合了数据验证，支持事件和用户日志全链路数据验证 <a id="2-zheng-he-shu-ju-yan-zheng"></a>

{% page-ref page="../integration/data-verification/" %}

#### 💡支持数据从接收、校验、入库全链路的验证

1. [Debug日志](https://docs.analysys.cn/features/project-manegement/data-integration/validation#debug-ri-zhi)（客户端可打印出日志）
2. [入库成功数据](https://docs.analysys.cn/features/project-manegement/data-integration/validation#ru-ku-cheng-gong-shu-ju-yong-yu-ji-suan)（用于计算）
3. [入库失败数据](https://docs.analysys.cn/features/project-manegement/data-integration/validation#ru-ku-cheng-gong-shu-ju-yong-yu-ji-suan)（错误日志）

![](../.gitbook/assets/image%20%28552%29.png)

#### 💡切换左上角菜单，可以验证 **用户日志** 了，即验证集成过程中，用户实名认证、属性等上报是否准确

![](../.gitbook/assets/image%20%28555%29.png)

### 3. 优化了错误日志的详情，快速定位问题 <a id="2-zheng-he-shu-ju-yan-zheng"></a>

{% page-ref page="../integration/data-verification/" %}

![](../.gitbook/assets/image%20%28557%29.png)

同时，Debug日志中也会红色标出了错误日志，方便快速识别

![](../.gitbook/assets/image%20%28548%29.png)



### ​4. 元数据管理中新增了维度表扩展实体属性

比如采集`支付订单`了事件，要对支付订单从商品品类、品牌、名称、颜色等等维度细分时，就需要上报这些属性，但实际上一个商品的品类、品牌等属性是商品固有的，如果每个用户的每个行为都上报这些属性会造成大量数据冗余，这时候就可以只上报商品ID，通过维度表来扩展商品的属性，来支持后续分析。

{% hint style="info" %}
V5.1版本仅支持通过代码的方式创建，如有需要，请联系专属的技术支持
{% endhint %}

### 5. 事件属性和用户属性的维度字典支持多对一

在元数据管理中，事件属性和用户属性支持上传多对一的维度字典，满足要将多个相同含义但是上报的数据有差异的属性值标准化为同一个值来分析的场景

> 比如设备品牌这个属性，实际上报的数据可能会存在`xiaomi`、`Xiaomi`、`xiaoMi`、`小米`等等，如果不做不做处理，在细分时就会看到多条结果，如果想要进行聚合，就可以上传一个多对一的维度字典，将这些原始值都对应到一个`小米`，那么在分析时，即可看到更标准化的结果

### 5. 新增了项目当前服务状态，出现问题时可快速检查各处异常

![](../.gitbook/assets/image%20%28556%29.png)

## 增强系统权限控制 <a id="you-hua-fen-xi-huan-jie"></a>

### 1. 扩展数据权限的设置，提高数据安全性

🗄 支持根据事件、事件属性、用户属性限制数据可见范围

> 比如金融机构，不同城市的机构只能查看自己所辖区域的用户行为

🗄 设置脱敏和隐藏字段

> 比如存款金额、手机号等隐私信息可以设置隐藏或者脱敏处理，防止泄漏

![](../.gitbook/assets/image%20%28541%29.png)

### 2. 新增角色管理，以满足用户给不同的使用者灵活定义功能范围的需求

{% page-ref page="../features/project-manegement/role.md" %}

系统预置了常用 5 种角色，若不能满足实际需要，支持根据实际需要自定义角色及角色对应的功能和数据范围，满足个性化需求

![](../.gitbook/assets/image%20%28551%29.png)

### 3. 新增资源转移，方便人员离职时快速转移/删除已创建资源

若企业中有人员离职，但其创建的看板、分析后续仍然需要使用或管理，那么在禁用帐号时可以把相应转移资源转移给在职人员；当其创建的数据无效时，也可以选择删除。

![](../.gitbook/assets/image%20%28558%29.png)

### 4. 通过更新 License 获取单独付费产品模块的使用权限

对于方舟产品矩阵中增加的成员，比如智能画像产品，支持单独采购，获取新的 License，即可快速开启使用，开启后在各个模块即可用到相关功能，比如

* 用户模块新增标签管理功能，进入后可以根据规则创建标签，灵活搭建标签体系
* 支持应用标签体系中创建的标签进行分群

## 增强分析、分群等看数、用数环节体验 <a id="you-hua-fen-xi-huan-jie"></a>

### 1. 留存分析支持多事件、新增指标 <a id="1-liu-cun-fen-xi-zhi-chi-xuan-ze-duo-ge-shi-jian"></a>

{% page-ref page="../features/analytics/retention.md" %}

#### 🔍 初始和后续行为支持选择多个事件

> 比如社区类APP分析 点赞 或 关注了的用户后续再 启动 的用户留存

![](../.gitbook/assets/image%20%28550%29.png)

#### 🔍 新增了之后连续 N 日的留存/流失用户指标

![](../.gitbook/assets/image%20%28554%29.png)

### 2. 优化了自定义指标

{% page-ref page="../features/analytics/event.md" %}

#### 📝 自定义指标支持添加条件

> 比如某区域生鲜品类运营小二只关注生鲜品类下的订单金额指标时，就可以在定义指标时选择品类和地域条件限制

![](../.gitbook/assets/image%20%28560%29.png)

#### 📝 在选择事件后可以快速自定义指标，也可以选择了自定义指标后在行内直接编辑修改

![](../.gitbook/assets/image%20%28559%29.png)

### 3. 优化了所有属性下拉框

**📃** 增加了事件属性说明，以便多人使用同一属性时能更清楚属性的含义

📃 对数值和日期类型的属性值做了特殊标识，在细分维度和作为指标时的更深度的使用

* 数值型，支持自定义数据区间查看，可以进行求和、均值、最大值、最小值、人均值、去重数运算
* 日期型，支持按时间粒度细分查看

![](../.gitbook/assets/image%20%28549%29.png)

### 4. 维度值支持排序

* 数值型维度值支持按数据/数据区间大小排序
* 日期型支持按日期正序/倒序排序
* 字符串型支持按字母顺序排序

![](../.gitbook/assets/image%20%28543%29.png)

### 5. 用户分群支持用户自定义可见范围，保证分群明细的数据安全

原用户分群创建时默认对全员可见，对于有数据安全需要的场景可以设置仅自己可见

![](../.gitbook/assets/image%20%28553%29.png)

### 6. 广告跟踪支持生成短链，以便直接使用和生成的二维码易读性

创建UTM参数广告跟踪链接时，默认支持短链接，方便直接投放URL时使用；同时使用短链接生产二维码，增加识别度

![](../.gitbook/assets/image%20%28547%29.png)

### 7. 优化消息通知

#### 💬 支持添加自定义参数，满足点击通知后进入到指定页面

![](../.gitbook/assets/image%20%28542%29.png)

#### **💬 增加了阿里云和信鸽推送通道**

![](../.gitbook/assets/image%20%28545%29.png)

### **8. 其他若干优化**

* UA 解析设备类型更准确
* Session分析支持按事件属性分组查询
* 更新事件预置属性的状态
* 优化看板缓存
* 优化看板引导
* 优化上传字典时的异常处理和提示
* 优化语言是英文时的展示细节

## API 相关

* 新增Session分析API
* 新增渠道分析API
* 新增自定义SQL查询API
* 新增创建、修改虚拟事件API
* 新增了注册埋点的API
* 新增了脱敏在API中的应用

## 修复Bug

* 当上传了字典后，搜索属性值不能搜索到全部属性值的问题
* 事件和属性ID没有小写处理的问题
* 创建成员时在输入密码时点击回车会自动关闭窗口的问题

