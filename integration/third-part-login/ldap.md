# LDAPç™»å½•

æ–¹èˆŸä» 5.0 ç‰ˆæœ¬å¼€å§‹é›†æˆäº† LDAP ç™»å½•è®¤è¯ï¼Œç™»å½•æµç¨‹å¦‚ä¸‹ï¼š

1. è®¤è¯å‚æ•°é…ç½®ï¼›
2. ç”¨æˆ·åœ¨æ–¹èˆŸç³»ç»Ÿä¸­æ­£å¸¸ä½¿ç”¨LDAPç³»ç»Ÿçš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ï¼›
3. æ–¹èˆŸç³»ç»Ÿä¼šä½¿ç”¨ç”¨æˆ·å¡«å†™çš„ç”¨æˆ·åå’Œå¯†ç å»åå°é…ç½®çš„ LDAP ç³»ç»Ÿä¸­è¿›è¡Œèº«ä»½è®¤è¯ï¼Œè®¤è¯æˆåŠŸä¹‹åç”¨æˆ·å°±å¯ä»¥æ­£å¸¸ç™»å½•ä½¿ç”¨æ–¹èˆŸç³»ç»Ÿã€‚

{% hint style="info" %}
1ã€ç”±äºæ–¹èˆŸç³»ç»Ÿæ˜¯å…·æœ‰å¹³å°æˆå‘˜å’Œé¡¹ç›®æˆå‘˜ä¸¤çº§æƒé™è®¾è®¡ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡é€šè¿‡LDAPè®¤è¯ç™»å½•çš„ç”¨æˆ·ï¼Œä¼šåŒæ­¥ç”¨æˆ·ä¿¡æ¯åˆ°æ–¹èˆŸå¹³å°æƒé™ä½“ç³»ã€‚

2ã€é€šè¿‡LDAPè®¤è¯ç™»å½•çš„ç”¨æˆ·ï¼Œéœ€è¦é¡¹ç›®ç®¡ç†å‘˜åœ¨æ–¹èˆŸä¸­å¯¹è¯¥ç”¨æˆ·åˆ†é…ç›¸åº”çš„é¡¹ç›®æƒé™ï¼Œè¿™æ ·è¯¥ç”¨æˆ·å°±èƒ½åœ¨LDAPè®¤è¯ç™»å½•åï¼Œèƒ½å¤Ÿç›´æ¥è®¿é—®æˆæƒçš„é¡¹ç›®ã€‚

å…·ä½“ä¿¡æ¯å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼š[æ˜“è§‚æ–¹èˆŸ-å¹³å°ç®¡ç†](../../features/enterprise-management/)
{% endhint %}

## 1. é…ç½®æ­¥éª¤

æ–¹èˆŸæ¥å…¥LDAPæœåŠ¡è®¤è¯ï¼Œæ ¹æ®æ–¹èˆŸéƒ¨ç½²æƒ…å†µï¼ˆæ˜¯å…¨æ–°éƒ¨ç½²è¿˜æ˜¯å‡çº§åˆ°5.0\)å­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œé…ç½®æ­¥éª¤ä¸Šéƒ¨åˆ†å·®å¼‚ï¼š

1. [å…¨æ–°éƒ¨ç½²çš„5.0 åŠä»¥ä¸Šç‰ˆæœ¬](ldap.md#11-quan-xin-bu-shu-5-0-ban-ben-de-ldap-pei-zhi-bu-zhou)
2. [ä»ä½ç‰ˆæœ¬å‡çº§åˆ°5.0 åŠä»¥ä¸Š](ldap.md#12-sheng-ji-bu-shu-5-0-ban-ben-de-ldap-pei-zhi-bu-zhou)

### 1.1 å…¨æ–°éƒ¨ç½²5.0+ ç‰ˆæœ¬çš„LDAP é…ç½®æ­¥éª¤

1ï¼‰æ‰“å¼€`Ambari`ç®¡ç†å¹³å°ç™»å½•ï¼ˆhttp://{ARK1\_HOST}:8080/ï¼Œå…·ä½“åœ°å€è¯·è”ç³»æ–¹èˆŸé¡¹ç›®ç»ç†ï¼‰

![ambari login](../../.gitbook/assets/image%20%28380%29.png)

2ï¼‰æ‰“å¼€æ–¹èˆŸåº”ç”¨æœåŠ¡ `Ark Web` å‚æ•°é…ç½®ä¸­å¿ƒï¼š

ç™»å½•åï¼Œåœ¨`Ambari`ä¸»ç•Œé¢ï¼Œå·¦ä¾§æœåŠ¡åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ° `Ark Web`æœåŠ¡ï¼Œç‚¹å‡»è¿›å…¥ï¼Œåœ¨å³ä¾§å†…å®¹é¡µï¼Œé€‰æ‹©`Configs` æ ‡ç­¾å¡ï¼Œæœ€åç‚¹å¼€ `Advanced ark-web-app-api-server` å‚æ•°é…ç½®é¡¹ï¼Œæ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](../../.gitbook/assets/image%20%28367%29.png)

3ï¼‰å¡«å†™LDAP å‚æ•°é…ç½®é¡¹ï¼Œä¿å­˜ä¿®æ”¹å¥½çš„å‚æ•°

ä¸‹æ»‘é¡µé¢ï¼Œåœ¨`Advanced ark-web-app-api-server`çš„ç±»åˆ«ä¸‹æ‰¾åˆ°`arkweb.ldap` å¼€å¤´çš„å‚æ•°ï¼ŒæŒ‰ç…§LDAPæœåŠ¡æƒ…å†µå¡«å†™æ­£ç¡®çš„LDAPæ¥å…¥é…ç½®ï¼Œç¡®ä¿é…ç½®æ— è¯¯åï¼Œç‚¹å‡»å³ä¸Šè§’ `Save`æŒ‰é’®è¿›è¡Œä¿å­˜ã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

![](../../.gitbook/assets/image%20%28362%29.png)

4ï¼‰é‡å¯æ–¹èˆŸ`Ark Web` æœåŠ¡ï¼Œå¯åŠ¨LDAPç¬¬ä¸‰æ–¹ç™»å½•

ç¡®è®¤LDAPå‚æ•°é…ç½®æ­£ç¡®é…ç½®å’Œä¿å­˜åï¼Œé‡å¯`Ark Web` æœåŠ¡ï¼Œä½¿LDAPç¬¬ä¸‰æ–¹ç™»å½•é…ç½®ç”Ÿæ•ˆã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

![](../../.gitbook/assets/image%20%28381%29.png)

### 1.2 å‡çº§éƒ¨ç½²5.0+ ç‰ˆæœ¬çš„LDAP é…ç½®æ­¥éª¤

è‹¥ä»5.0 ä»¥ä¸‹ç‰ˆæœ¬å‡çº§ä¸Šæ¥çš„ï¼Œåœ¨`Ambari`å‚æ•°é…ç½®ä¸­å¿ƒçš„`Advanced ark-web-app-api-server`ç±»åˆ«ä¸­æ˜¯æ‰¾ä¸åˆ°LDAPç›¸å…³é…ç½®é¡¹ï¼Œè¿™æ—¶å€™éœ€è¦æ‰‹åŠ¨åœ¨`Custom ark-web-app-api-server` ä¸­æ·»åŠ  é…ç½®é¡¹ï¼Œå³å¯ç”Ÿæ•ˆï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

1ï¼‰æ‰“å¼€è‡ªå®šä¹‰å‚æ•°é…ç½®ä¸­å¿ƒï¼Œæ·»åŠ è‡ªå®šä¹‰å±æ€§

åœ¨`Ambari`ä¸»ç•Œé¢ï¼Œå·¦ä¾§æœåŠ¡åˆ—è¡¨ä¸­ï¼Œæ‰¾åˆ° `Ark Web`æœåŠ¡ï¼Œç‚¹å‡»è¿›å…¥ï¼Œåœ¨å³ä¾§å†…å®¹é¡µï¼Œé€‰æ‹©`Configs` æ ‡ç­¾å¡ï¼Œæœ€åç‚¹å¼€ `Custom ark-web-app-api-server` å‚æ•°é…ç½®é¡¹ï¼Œç‚¹å‡» `Add Property`ï¼Œæ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](../../.gitbook/assets/image%20%28366%29.png)

2ï¼‰æ·»åŠ LDAPé…ç½®å‚æ•°

åœ¨å¼¹å‡ºçš„æµ®çª—ä¸­ï¼Œå¯ä»¥æ‰¹é‡æ·»åŠ å‚æ•°é…ç½®ï¼Œä¸€è¡Œå¯¹åº”ä¸€ä¸ªå‚æ•°è®¾ç½®ï¼Œå‚æ•°é…ç½®å¯ä»¥å¤åˆ¶ï¼š

```text
# è¯·æ ¹æ®LDAPæœåŠ¡å™¨æƒ…å†µå˜æ›´ä»¥ä¸‹å‚æ•°
arkweb.ldap.enabled = true
arkweb.ldap.urls= ldap://192.168.10.30:389/
arkweb.ldap.baseDn= dc=analysys,dc=com
arkweb.ldap.userDnPattern = cn=${username}
arkweb.ldap.admin = true
arkweb.ldap.adminUsername= cn=Manager,dc=analysys,dc=com
arkweb.ldap.adminPassword= 123456
arkweb.ldap.searchFilter=
arkweb.ldap.emailSuffix=@analysys.com.cn
```

æ“ä½œæ­¥éª¤å¦‚ä¸‹å›¾ï¼š

![](../../.gitbook/assets/image%20%28371%29.png)

3ï¼‰ä¿å­˜é…ç½®é¡¹

å†æ¬¡æ£€æŸ¥å‚æ•°æ˜¯å¦æ­£ç¡®é…ç½®ï¼Œå¦‚æœé…ç½®é”™è¯¯ ï¼Œåœ¨ä¸‹é¢é¡µé¢ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œç¡®è®¤æ— è¯¯ï¼Œä¸€å®šè¦è®°å¾—ç‚¹å‡»å³ä¸Šè§’`Save`æŒ‰é’®è¿›è¡Œä¿å­˜ã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

![](../../.gitbook/assets/image%20%28368%29.png)

4ï¼‰ä¿å­˜åï¼Œé‡å¯æ–¹èˆŸ`Ark Web` æœåŠ¡

ç¡®è®¤LDAPå‚æ•°é…ç½®æ­£ç¡®é…ç½®å’Œä¿å­˜åï¼Œé‡å¯`Ark Web` æœåŠ¡ï¼Œä½¿LDAPç¬¬ä¸‰æ–¹ç™»å½•é…ç½®ç”Ÿæ•ˆã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

![](../../.gitbook/assets/image%20%28375%29.png)

## 2. é…ç½®é¡¹è¯´æ˜

| **å‚æ•°** | æ˜¯å¦å¿…å¡« | å‚æ•°è¯´æ˜ |
| :--- | :--- | :--- |
| arkweb.ldap.enabled | Y | æ˜¯å¦å¼€å¯LDAPè®¤è¯ï¼Œå¼€å¯åˆ™éœ€è¦è®¾ç½®ä¸ºtrueï¼Œé»˜è®¤ä¸ºfalse |
| arkweb.ldap.urls | Y | LDAP æœåŠ¡çš„åœ°å€ï¼Œldap://ip:port æ ¼å¼ |
| arkweb.ldap.baseDn | Y | LDAP Base DNï¼Œè¿›è¡ŒLDAP ç”¨æˆ·åæ£€ç´¢çš„ Base Dnã€‚ä¾‹å¦‚ï¼š`ou=people,dc=example,dc=com` |
| arkweb.ldap.userDnPattern | Y | ç™»å½•çš„ç”¨æˆ·åæ ¼å¼ï¼Œå¸¸ç”¨çš„ä¾‹å¦‚ï¼š`uid=${username}` æˆ– `â€‹cn=${username}@email.com` |
| arkweb.ldap.admin | Y | å½“ LDAP é…ç½®äº†ç¦æ­¢åŒ¿åè®¿é—®æ—¶ï¼Œéœ€è¦è®¾ç½®ä¸º true ï¼Œå¹¶é…ç½®ç®¡ç†å‘˜ä¿¡æ¯ |
| arkweb.ldap.adminUsername | N | å½“ LDAP é…ç½®äº†ç¦æ­¢åŒ¿åè®¿é—®æ—¶ï¼Œéœ€è¦ç»‘å®šçš„ç®¡ç†å‘˜è´¦å· |
| arkweb.ldap.adminPassword | N | å½“ LDAP é…ç½®äº†ç¦æ­¢åŒ¿åè®¿é—®æ—¶ï¼Œéœ€è¦ç»‘å®šçš„ç®¡ç†å‘˜å¯†ç  |
| arkweb.ldap.searchFilter | N | åœ¨ LDAP ä¸­æŸ¥æ‰¾ç”¨æˆ·æ—¶æ˜¯å¦æŒ‰ç…§æŒ‡å®šçš„ filter è¿›è¡Œç­›é€‰ |
| arkweb.ldap.emailSuffix | Y | ç™»å½•åçš„ç”¨æˆ·åæ·»åŠ é‚®ç®±åç¼€ã€‚æ–¹èˆŸä¸­ç”¨æˆ·é‚®ç®±æ˜¯å¿…é¡»è¦æ±‚çš„ |

{% hint style="info" %}
ä»¥ä¸Šå†…å®¹æ²¡æœ‰è§£ç­”æˆ‘çš„é—®é¢˜ï¼Ÿ[ç‚¹å‡»æˆ‘è¿›å…¥æ–¹èˆŸè®ºå›å»åé¦ˆ](https://www.analysysdata.com/forum/index) ğŸš€
{% endhint %}

