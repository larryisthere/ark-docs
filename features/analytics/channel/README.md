# 渠道分析

{% hint style="info" %}
**渠道分析功能的使用需要相应平台集成支持该功能的SDK：**

Android SDK ：v4.1.2 及以上  
iOS SDK： v4.1.2 及以上  
JS SDK：v4.1.3 及以上  
小程序 SDK：v4.1.3 及以上
{% endhint %}

渠道，即企业（产品）与用户产生互动的各个触点，比如搜索引擎、社交媒体、广告平台、线下站会等等。

一个完整的用户旅程，通常包括：站外渠道→展示创意→投放 URL →着陆页→辅助转化文案及 CTA →应用商店（仅移动端）→产品转化 6大关键环节，每个环节都有相应的指标来衡量渠道入口。

| 用户旅程 | 影响因素 | 度量指标 | 优化点 | 通常负责的团队 |
| :--- | :--- | :--- | :--- | :--- |
| 站外渠道 | 用户匹配度  广告出价 | 展示量  点击量 | 渠道选择  人群优化  智能出价 | 市场/运营 |
| 创意 | 用户匹配度  创意吸引度 | CTR（Click Through Rate，点击率） | 创意优化  A/B测试 | 市场/运营 |
| 链接URL | 是否可以打开 |  |  | 市场/运营 |
| 着陆页 | 着陆页质量 （与创意的符合程度、着陆页本身的内容）  用户匹配度 | 着陆页PV   着陆页UV   加载时长   跳出率 | 着陆页优化 | 市场/运营 |
| 辅助转化的内容及CTA | 辅助转化的内容相关性 CTA（Call To Action，召唤用户行动） | 停留时长   访问深度   …… | 辅助转化内容CTA | 运营/产品 |
| 产品转化 | 产品设计 | 转化用户    转化率   e.g. 下载、注册成功、交易 | 产品本身 | 产品 |

站外渠道的广告展示量、点击量等数据方舟目前无法获得，不在范畴之内。

渠道分析模型用于分析用户（包括访客）的访问来源，通过访问用户数、访问次数、访问时长、跳出率等基础指标评估渠道质量，同时也支持自定义转化目标衡量渠道的转化效果。

## 渠道分析能解决哪些问题？

1. 各个渠道实时的访问用户数、浏览量如何？
2. 上周选择了多个渠道对网站进行了推广，各个渠道带来的用户注册量如何？
3. 社交媒体、搜索引擎、外部链接……哪个渠道带来的用户留存率更高？
4. 微信来源用户更多集中在公众号还是朋友圈？
5. 哪些搜索词带来的流量很大，且转化效果也好？

   ……

## 功能说明

![](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901151116397702.jpg)

### 1. 定义指标区

左侧为指标定义区域，选择分析的平台、渠道的维度、基础指标和转化指标，衡量渠道表现

![img](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901151130096897.jpg)

#### 1.1 选择分析平台

支持Web/H5、APP、小程序平台，细分查看渠道表现，因为各个平台衡量的指标和细分维度会略有差异；

同时支持添加条件，比如查看 Web/H5 平台下某个具体着陆页的访问来源情况；APP 某个版本的用户来源情况。

![img](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901181139112512.gif)

#### 1.2 选择分析渠道的维度

{% hint style="info" %}
渠道分析模型中分析的是用户的每一次访问的来源（即一个Session的来源）。当用户产生一次访问时，会根据上报的URL中的UTM参数、referrer信息来识别不同的渠道属性，具体处理规则详见文末 [《附：渠道来源识别规则》](processing-logic.md)
{% endhint %}

从下拉框中可以选择不同平台下的渠道分析维度，具体维度如下：

| 属性名称 | 属性说明 | 平台 | 预置属性ID | SDK采集/数据处理说明 |
| :--- | :--- | :--- | :--- | :--- |
| 来源地址 | 页面来源 | Web/H5、小程序 | $referrer | SDK上报 |
| 来源域名 | 页面来源域名，e.g.baidu.com | Web/H5 | $referrer\_domain | SDK上报 |
| 渠道来源分组 | 渠道来源分组，e.g.搜索引擎、社交媒体、直接访问等 | Web/H5 | $traffic\_source\_type | 根据规则处理，方舟提供预置分组 |
| 活动/广告名称 | 活动/广告名称 | Web/H5、小程序、APP | $utm\_campaign | SDK上报，部分数据处理 |
| 活动/广告媒介 | 活动/广告媒介 | Web/H5、小程序、APP | $utm\_medium | SDK上报，部分数据处理 |
| 活动/广告来源 | 活动/广告来源 | Web/H5、小程序、APP | $utm\_source | SDK上报，部分数据处理 |
| 活动/广告内容 | 活动/广告内容 | Web/H5、小程序、APP | $utm\_content | SDK上报，部分数据处理 |
| 活动/广告关键字 | 活动/广告关键字 | Web/H5、小程序、APP | $utm\_term | SDK上报，部分数据处理 |
| 搜索引擎 | 标识搜索引擎来源，e.g.百度 | Web/H5 | $search\_engine | 根据referrer解析 |
| 搜索词 | 标识搜索词，e.g.易观方舟 | Web/H5 | $search\_keyword | 根据referrer解析 |
| 社交媒体 | 标识社交媒体来源，e.g.微博 | Web/H5 | $social\_media | 根据referrer解析 |
| 社交媒体分享来源 | 标识社交媒体分享来源，e.g.微信朋友圈、微信群 | Web/H5 | $social\_share\_from | 根据referrer和url解析 |
| APP下载渠道 | 下载渠道 | APP | $channel | SDK上报 |
| 场景值 | 标识小程序的场景值，e.g顶部搜索框的搜索结果页 | 小程序 | $scene | SDK上报，根据referrer中的参数解析 |
| 场景值类型 | 标识小程序的场景分类 | 小程序 | $scene\_type | 根据规则方舟，方舟提供预置分组 |

#### 1.3 选择衡量渠道的基础指标

| 基础指标 | 指标说明 | 平台 |
| :--- | :--- | :--- |
| 访问用户数（UV） | Unique Visitor， 访问用户的去重数 | Web/H5、小程序 |
| 访问次数 | 指用户访问应用的总次数，即会话（Session）数 | Web/H5、小程序 |
| 浏览量（PV） | 指用户浏览Web/H5页面的总次数，同一个页面访问多次会被重复计 | Web/H5、小程序 |
| 人均访问次数 | 人均访问次数=访问次数/访问用户数（UV） | Web/H5、小程序 |
| 人均页面浏览量 | 人均页面浏览量=浏览量（PV）/访问用户数（UV） | Web/H5、小程序 |
| 人均访问时长 | 人均访问时长=Session时长之和/访问用户数（UV） | Web/H5、小程序 |
| 单次访问页面浏览量 | 平均每次访问浏览页面的次数，单次访问页面浏览量=浏览量（PV）/访问次数 | Web/H5、小程序 |
| 单次访问时长 | 平均每次访问的时长，单次访问时长=总访问时长/会话数 | Web/H5、小程序 |
| 单次访问事件数 | 平均每次访问的事件数量（包括浏览页面和点击事件），单次访问事件数=总访问事件数/会话数 | Web/H5、小程序 |
| 跳出率 | 跳出率=访问了一个页面的Session数/总的Session数。用户进入着陆页就离开用户来到网站后，除了浏览LandingPage之外，没有发生其他任何操作就离开了网站，被视为跳出。用来衡量Landingpage的质量。 | Web/H5、小程序 |
| 次日留存率 | 某日访问的用户在第2日再次来访问的用户数 | Web/H5、小程序、APP |
| 7日留存率 | 某日访问的用户在第7日再次来访问的用户数 | Web/H5、小程序、APP |
| 14日留存率 | 某日访问的用户在第14日再次来访问的用户数 | Web/H5、小程序、APP |
| 30日留存率 | 某日访问的用户在第30日再次来访问的用户数 | Web/H5、小程序、APP |
| 活跃用户数 | Unique Visitor， 访问用户的去重数 | Web/H5、小程序、APP |
| 访问次数 | 指用户访问应用的总次数，即会话（Session）数 | Web/H5、小程序、APP |
| 人均访问时长 | 人均访问时长=Session时长之和/访问用户数（UV） | Web/H5、小程序、APP |

#### 1.4 选择渠道的转化目标

每一次活动的转化目标可能会不同，方舟支持自定义选择一个事件作为转化目标，来更有效的衡量不同渠道最终的转化质量。

| 转化指标 | 指标说明 | e.g. 转化目标：点击购买 ；访问来源：谷歌搜索 |
| :--- | :--- | :--- |
| x事件的转化用户数 | 指某个渠道进来的用户触发了x事件的用户数 | 从谷歌搜索进入网站之后点击购买的用户数 |
| x事件的转化用户数占比 | x事件的转化用户数/总访问用户数 | 从谷歌搜索进入网站之后点击购买的用户数/进入网站访问的总用户数 |
| x事件的转化次数 | 指某个渠道进来的用户触发了x事件的会话次数 | 从谷歌搜索进入网站之后发生了点击购买的访问次数 |
| x事件的转化次数占比 | x事件的转化次数/总访问次数 | 从谷歌搜索进入网站之后发生了点击购买的访问次数/进入网站的总次数 |
| x事件的y属性z指标 | x事件的y属性z指标（不同数据类型的属性值有不同的指标） | 从谷歌搜索进入网站之后点击购买的购买金额的总和 |

### 2. 选择对比分群区

支持选择某个细分分群，查看他们从各个不同渠道访问进入产品中的情况；也支持多个分群对比，比如对比所有用户的访问来源和新访用户的访问来源

![img](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901161415194560.jpg)

### 3. 图表展示区

图表展示区，可以选择时间范围，时间粒度，图表样式

#### 3.1 时间范围

渠道分析记录的是用户每一次访问的来源，同一个用户每次访问都可能会从不同的来源进入产品当中，比如小鸣昨天从搜索引擎中打开方舟进入查看，今天直接从收藏夹中打开，所以在分析时一定需要框定时间范围。

![image](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901181158020391.png)

可以选择近30日、今日、上周等常用范围，也可以在右侧自定义开始时间和结束时间。

当选择的是相对时间保存图表后，以后查询时会展示动态的时间范围。

例如今天是3月16日，选择查询近7日，查询结果是3月9日至3月15日的数据；在3月21日打开保存的该图表时，查看到的数据将是3月14日至3月20日。

{% hint style="info" %}
**当选择对比日期时，可以对比上一时段、去年同期、自定义对比指标表现：**

**对比上一时段**：从选择时间范围向后移动相同天数的时间范围，比如当前选择的是1月9日-1月15日，选择了对比上一时间，则对比的是1月2日-1月8日，即可以分别对比1月9日与1月2日，1月10日与1月3日……的指标差异 

**对比去年同期**：对比当前时间段与去年同期的时间段，比如当前选择的是2019年1月9日-1月15日，选择了对比上一时间，则对比的是2018年1月9日-1月15日，即可以分别对比2019年1月9日与2018年1月9日，2019年1月10日与2018年1月10日……的指标差异

**自定义对比**：自定义时间范围，比如当前选择的是1月9日-1月15日，自定义对比1月8日-1月14日，即可分别对比1月9日与1月8日，1月10日与1月9日……的指标差异
{% endhint %}

#### 2.2 分析方法

**A. 合计**

合计，表示可以查看一段时间里整体的来源分布。

**B. 趋势**

趋势，可以按照一定的时间粒度聚合，比如查看一段时间里每一天的用户来源分布，也可以查看每周的指标表现。

| 时间粒度 | 说明 |
| :--- | :--- |
| 按合计 | 可以查看选定时间范围内的汇总 |
| 按分钟 | 按分钟聚合，实时计算 |
| 按小时 | 按小时聚合，实时计算 |
| 按日 | 默认按照从 00:00:00 到 23:59:59 的完整日聚合，当时间范围中包含今日时，最多延迟几分钟 |
| 按周 | 默认周一到周日的自然周聚合，当时间范围不足自然周时，计算的是选择范围内所在周若干天的聚合 |
| 按月 | 当时间范围不足自然月时，计算的是选择范围内所在月若干天的聚合 |

#### 2.3 图表结果

展示不同的指标、条件、人群、维度、时间范围、分析方法组合查询结果，支持折线图、柱状图、条形图、面积图、散点图和表格，不同场景下会推荐合适的图形。

| 指标（M） | 维度（D） | 分群（S） | 场景 | 分析方法 | 时间粒度 | 时间对比 | 支持的图表 | 默认显示 | 时间对比时默认显示 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | 1 | 1 | 1M1D1S | 趋势 | 分钟/小时/日/周/月 | √ | 折线图、柱状图、面积图、表格 | 折线图 | 表格 |
| n | 1 | 1 | nM1D1S | 趋势 | 分钟/小时/日/周/月 |  | 表格 | 表格 |  |
| 1 | n | 1 | 1MnD1S | 趋势 | 分钟/小时/日/周/月 | √ | 折线图、柱状图、面积图、表格 | 表格 | 表格 |
| n | n | 1 | nMnD1S | 趋势 | 分钟/小时/日/周/月 |  | 表格 | 表格 |  |
| 1 | 1 | n | 1M1DnS | 趋势 | 分钟/小时/日/周/月 |  | 折线图、柱状图、面积图、表格 | 柱形图 |  |
| n | 1 | n | nM1DnS | 趋势 | 分钟/小时/日/周/月 |  |  |  |  |
| 1 | n | n | 1MnDnS | 趋势 | 分钟/小时/日/周/月 |  | 表格 | 表格 |  |
| n | n | n | nMnDnS | 趋势 | 分钟/小时/日/周/月 |  |  |  |  |
| 1 | 1 | 1 | 1M1D1S | 合计 |  | √ | 环状图、柱状图、条形图、表格 | 环状图 | 表格 |
| n | 1 | 1 | nM1D1S | 合计 |  | √ | 环状图、柱状图、条形图、散点图、表格 | 散点图 | 表格 |
| 1 | n | 1 | 1MnD1S | 合计 |  | √ | 环状图、柱状图、条形图、表格 | 表格 | 表格 |
| n | n | 1 | nMnD1S | 合计 |  | √ | 环状图、柱状图、条形图、散点图、表格 | 表格 | 表格 |
| 1 | 1 | n | 1M1DnS | 合计 |  | √ | 环状图、柱状图、条形图、表格 | 环状图 | 表格 |
| n | 1 | n | nM1DnS | 合计 |  | √ | 表格 | 表格 | 表格 |
| 1 | n | n | 1MnDnS | 合计 |  | √ | 环状图、柱状图、条形图、表格 | 表格 | 表格 |
| n | n | n | nMnDnS | 合计 |  | √ | 表格 | 表格 | 表格 |

以下将结合具体场景举例说明：

**A. 分析各类渠道上获取的新用户访问趋势**

选择【新访问用户】分群，选择【渠道来源分组】维度，选择【访问用户数】指标，分析方法【趋势】，时间粒度【按日】

![image](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901161517453802.jpg)

**B. 分析各类渠道上新增老用户的差异**

选择【新访问用户】、【所有用户】分群，选择【渠道来源分组】维度，选择【访问用户数】指标，分析方法【合计】

![image](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901161527544607.jpg)

**C. 分析不同搜索引擎来源的用户访问质量**

选择【新访问用户】分群，选择【搜索引擎】维度，选择【访问用户数】、【跳出率】指标，分析方法【合计】，选择散点图，可以查看质量矩阵，快速识别访问用户数高，跳出率又低的高质量渠道

![image](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901161557407210.jpg)

**D. 分析不同着陆页的指标表现**

选择【新访问用户】分群，选择【着陆页】维度，选择【访问用户数】、【跳出率】等指标，通过表格可以直观查看各个着陆页的各个指标标表现

![image](https://imguserradar.analysys.cn/fangzhou/img/2019/01/201901161611444294.jpg)

### 4. 其他功能

其他保存、下载共享、抽样计算、强制刷新等等所有分析模型通用功能，详见[《分析》](../)。

## 常见问题

### 1. 为什么按照某个渠道维度细分，各维度值的访问用户数加和不等于总用户数？

渠道分析模型分析的是用户每次的访问来源，在一段时间里同一个用户可能会从多个来源访问进入，那会在多个渠道上分别记录该用户。比如，小鸣上午从谷歌搜索进入方舟，下午从知乎的文章进入方舟网站，那么在查看谷歌来源的时候小鸣会被记入，在查看知乎来源的时候小鸣也会被记录，按照各维度值加总的时候就是会不等于总数，但按访问次数去查看时，各维度值访问次数之和=总访问次数。

### 2. 为什么我的项目查看渠道分析时都没有数据？

渠道分析需要使用 v4.1.3.1\_20181228 之后的SDK上报数据，所以建议更新到最新的SDK，尤其是私有化的项目。

### 3. 什么样的情况会被记录为直接访问？

一般来说，以下情况会被判定为直接访问：

* 通过在 Flash、邮件客户端、MS Office、PDF文档、APP中直接点击链接（未加任何标记）跳转来的访问；
* 在地址栏中直接输入 URL 打开的访问
* 从收藏夹或书签中打开的访问；
* 302 的重定向有时候会导致 referral 被删除
* http 重定向成 https 时，referral 不会传递，主要是因为安全因素
* 其他 referral 为空的情况

