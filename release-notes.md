# 产品更新日志

## 5.1 - 2020年10月28日

#### 新增 <a id="id-2020&#x5E74;&#x65B9;&#x821F;&#x7248;&#x672C;&#x89C4;&#x5212;&#x548C;&#x8FDB;&#x5C55;-&#x65B0;&#x589E;.1"></a>

* **权限相关**
  * 扩展数据权限，根据事件、事件属性、用户属性限制数据可见范围、设置脱敏和隐藏字段，提高数据安全性（管理-成员管理-设置成员权限）
  * 新增角色管理，以满足用户给不同的使用者灵活定义功能范围的需求（[管理-项目角色管理](features/project-manegement/role.md)）
  * 新增个人项目权限概览，方便个人查看自己具有的权限（头像-个人设置）
  * 新增资源转移，方便人员离职时快速转移/删除已创建资源（平台成员管理-禁用帐号）
  * 通过更新 License 获取单独付费模块的使用权限（平台管理-当前计划）
* **数据接入相关**
  * Debug数据验证变更为数据验证，增加数据概览和 Profile 数据上报的验证，更便捷、全面的验证数据接入（管理-数据接入管理-数据验证）
  * 新增维度表扩展实体属性（分析中可应用、通过代码设置在元数据管理可查看）
  * 在项目中增加当前服务状态，以便出现问题时可以快速检查各处异常（左上角项目Logo位置）
  * 可视化埋点升级，支持选择同级元素、圈选属性等，扩大可视化埋点可采集的数据边界，提升埋点效率（管理-数据接入管理-可视化埋点）
* **分析模块**
  * 留存分析支持选择多个事件作为初始和回访行为，新增查看连续 N 日后的留存和流失
  * 创建自定义指标时支持添加过滤条件
  * 事件分析中在选择事件后组成的指标后增加了创建自定义指标的入口，支持在已有指标上快速自定义指标
* **用户模块**
  * 开启了智能画像产品服务后：
    * 用户模块新增标签管理功能，进入后可以根据规则创建标签，灵活搭建标签体系
    * 支持应用标签体系中创建的标签进行分群
  * 用户分群支持用户自定义可见范围，保证分群明细的数据安全（保存分群、列表中分群共享入口）
* **运营模块**
  * 消息通知支持自定义参数
  * 增加阿里云和信鸽推送通道（通道本身支持设备厂商推送）

#### 优化 <a id="id-2020&#x5E74;&#x65B9;&#x821F;&#x7248;&#x672C;&#x89C4;&#x5212;&#x548C;&#x8FDB;&#x5C55;-&#x4F18;&#x5316;"></a>

* **数据接入相关**
  * Debug日志中标出了错误日志，方便快速识别出错误
  * 优化错误数据的错误详情，以便用户根据错误提示快速定位问题
  * 维度字典支持多对一， 做数据清洗，比如将xiaomi、Xiaomi等对应为一个小米
* **分析相关**
  * 优化了所有属性下拉框，明确类型标识，增加事件属性说明，以便使用时更清楚属性的含义
  * Session分析支持按事件属性分组查询
  * 维度值支持排序（包括数值型区间默认展示顺序优化）
* **运营相关**
  * 广告跟踪支持生成短链，以便直接使用和生成的二维码易读性
  * 消息通知点击后打开行为支持自定义参数
*  **数据相关**
  * GDPR增强
* **其他若干优化**
  * UA 解析设备类型更准确
  * 更新事件预置属性的状态
  * 优化看板缓存
  * 优化看板引导
  * 优化上传字典时的异常处理和提示
  * 优化语言是英文时的展示细节

#### API <a id="id-2020&#x5E74;&#x65B9;&#x821F;&#x7248;&#x672C;&#x89C4;&#x5212;&#x548C;&#x8FDB;&#x5C55;-API"></a>

* 新增了注册埋点的API
* 新增了脱敏在API中的应用
* 新增Session分析API
* 新增渠道分析API
* 新增自定义SQL查询API
* 新增创建、修改虚拟事件API

#### 修复Bug <a id="id-2020&#x5E74;&#x65B9;&#x821F;&#x7248;&#x672C;&#x89C4;&#x5212;&#x548C;&#x8FDB;&#x5C55;-&#x4FEE;&#x590D;Bug"></a>

* 当上传了字典后，搜索属性值不能搜索到全部属性值的问题
* 事件和属性ID没有小写处理的问题
* 创建成员时在输入密码时点击回车会自动关闭窗口的问题

## 4.6.0 -  **2020年03月17日**

#### **新增**

* 分析相关
  * 新增日期排除设置（在企业管理-企业设置中），开启后在查看分析报表时设置查看排除某些日期的数据，满足譬如金融类用户过滤非交易日的需求
  * 所有模块中事件被选项支持标签分组和筛选，以便清晰的展示和过滤想要的事件
  * 所有分析/分群添加条件时，运算符为“等于”、“不等于”的情况下支持批量输入值，满足譬如快速选择已知的一批用户 ID 的场景
* 数据管理相关
  * 虚拟事件增加标签，以便分析时同样支持根据标签分组、快速选择
  * 埋点方案中新增埋点变更记录，记录什么人对事件/属性做了什么操作，方便多人共同管理埋点方案出现问题时追踪
* License
  * 新增了事件量超出限额的控制，超出后将自动关闭数据，不再处理新的数据，继续使用需要输入扩容后的 [License](https://docs.analysys.cn/ark/faq/license) 重新认证
  * [License](https://docs.analysys.cn/ark/faq/license) 中增加机器码绑定，即一个 [License](https://docs.analysys.cn/ark/faq/license) 仅可用于一套部署环境
* API
  * 新增了获取分群用户明细接口支持分页查询
  * 元事件列表接口增加回数平台

#### **改进**

* 大幅优化查询性能
* 预置看板同样支持强制刷新、下载 PDF 和全屏查看
* 优化分析模型表格数据排序的顺序和部分特定场景下表格的默认展示形式
* 优化事件/指标选择下拉框中虚拟事件和自定义 Session 规则下部分指标的说明
* 消息通知中极光通道支持自己选择生产和测试环境，以满足在极光平台中配置了特定环境用于测试的场景
* 优化广告跟踪批量上传时的异常提示，以提高排错修正效率
* 优化删除项目，使得被删除项目的 AppKey 被复用时不再查询历史垃圾数据
* 优化小舟助手点击帮助文档的跳转，从哪个功能点击进入就跳转到相应功能的说明文档中
* 对所有用户显示当前方舟版本信息 

**BUG修复**

* 修复了若干BUG

## 4.5.3 - 2019年11月30日

#### 新增

* 新增了 [项目管理API](integration/api/api-manage-enterprise/api-enterprise-project.md)，获取方舟中创建的项目信息
* 新增了 [成员管理API](integration/api/api-manage-enterprise/api-enterprise-user.md)，支持内部系统调用创建、管理用户

#### BUG修复

*  修复了若干BUG

{% hint style="info" %}
从 4.5.3 版本起支持绑定易观方舟小程序，在移动端随时随地查看数据动态
{% endhint %}

![&#x626B;&#x4E00;&#x626B;&#x6613;&#x89C2;&#x65B9;&#x821F;&#x5C0F;&#x7A0B;&#x5E8F;&#x7801;](.gitbook/assets/image%20%2839%29.png)

## 4.5.1 - 2019年11月05日

#### 新增

* 新增了[属性分析API](integration/api/api-analytics/api-user-attribute.md)

#### 改进

* 优化了预置看板的缓存，使得查看看板时数据更快速加载
* 性能优化

#### BUG修复

*  修复了若干BUG

## 4.5.0 - 2019年10月13日

#### 新增

* [智能监控](features/analytics/pathfinder.md)，针对上报元事件的触发次数和触发人数的异动进行智能监控
* 事件分析中增加触发时间作为默认筛选条件，可以查看关注的小时区间数据 
* 新增企业设置功能，可以自由配置收数地址
* 新增[ 分群管理API](https://docs.analysys.cn/ark/integration/api) 

#### 改进

* 看板增加编辑说明功能，方便所有人员查看
* 分析模块多处优化
  * 下载表格优化，增加显示结果类数据
  * 公共过滤条件和细分属性中的公共属性在切换指标时保留，方便任意切换指标进行查询
  * 添加了结果为无值的说明，以便了解造成无值的可能原因
  * 维度选择着陆页时，可以选择按标题或按URL展示，细化查询维度
* 企业成员优化，通过禁用和启用管理成员状态
* 支持在线手动停止数据流
* SDK支持采集小程序的分享事件及属性，并默认放到埋点方案中

#### BUG修复

*  修复了若干BUG

## 4.4.2 - 2019年09月27日

#### 新增

* [平台管理类API](integration/api/api-manage-enterprise/)

#### BUG修复

*  修复了若干BUG

## 4.4.1 - 2019年09月19日

#### 新增

* [管理类API](integration/api/api-manage-project/)

#### 改进

* 持续优化事件分析查询性能

## 4.4.0 - 2019年09月02日

#### **新增**

* **工具**支持小版本的增量更新，大多数的时候你不用下载完整安装包来进行系统升级了
* **分析**热图新增元素点击图（[Web](https://docs.analysys.cn/ark/features/analytics/heatmap/web#3-dian-ji-yuan-su-re-tu)、[APP](https://docs.analysys.cn/ark/features/analytics/heatmap/app#dian-ji-yuan-su-re-tu)），通过元素点击图可以精确了解每个元素被点击的数量
* **分析**中的**Session分析**现在同时支持预置规则及指标与自定义规则
* **看板**预置了不同客户端的数据看板，现在只要回数正常就可以看到当前客户端的基础数据概览
* **消息通知**支持直接将分群推送到外部平台（极光），如过你需要使用外部平台的功能，现在通过分群推送可以实现了
* **消息通知**中新增了**华为**通道
* **消息中心**中可以查看指标监控的信息，未来消息中心也会用于显示更多的系统级通知

#### **改进**

* 优化了**看板**的查询速度

#### Bug 修复

* 修复了若干 bug

## 4.3.5 - 2019年08月30日

* 修复了若干 bug

## 4.3.4 - 2019年07月29日

#### 新增

* 新增了查询 API 和功能 API，满足调用方舟数据结果自定义嵌入其他系统的需求
  * 文档中心新增了 [API 使用说明 ](https://docs.analysys.cn/ark/integration/api) 
  * 分析图表中新增了获取 API 查询参数入口
  * 项目概览中新增了获取 AppSecret 入口

#### 优化

* 优化了埋点方案
  * 支持埋点方案一键清空，满足不需要预置方案或者批量导入错误后需要快速删除的场景
  * 优化了单条事件的添加方式，支持添加事件和多个属性后一起保存，提高单条添加效率
  * 添加属性 ID 的过程支持行内联想输入，自动填充已使用属性ID 的名称和数据类型，规避同一属性 ID 不同含义不同数据类型的定义错误
  * 优化了埋点方案中下载文件的格式，方便下载更新后再次导入
* 优化了分析图表
  * 单个指标细分维度时，环状图的显示
  * 日期型属性作为维度值时，默认展示的粒度，从秒到天
  * 渠道分析大于三个指标时，默认气泡图优化为表格，更容易解读
* 优化了已共享看板/图表的共享成员数标识，方便直观查看当前看板/图表被共享情况
* 优化了擅自修改节点数不符合 Lisence 时的提醒方式  

#### Bug 修复

* 修复了若干 bug

## 4.3.2 - 2019年07月23日

#### **新增**

* 分析模型中选择事件时，支持移入查看事件的说明，更快速的了解事件的具体含义
* 分析模型中，支持字符型属性通过正则表达式来定义条件
* 分布分析中新增了直方图的呈现

#### **改进**

* 优化了埋点方案中添加事件的方式，单条添加时，支持一次性定义事件的多个属性
* 优化了事件分析中事件属性构成的指标顺序，数值型靠前，方便选择总和、均值等指标
* 优化了成员管理中设置成员数据权限的交互，快速分辨哪些用户添加了权限
* 优化中已共享看板的共享标识，快速识别当前看板贡献给了多少用户
* 转化漏斗扩展到了32步，支持定义复杂的业务流程

#### Bug 修复

* 修复了若干 bug

## 4.3.1 - 2019年07月08日

#### **新增**

* **看板**模块新增了邮件订阅，支持将数据报告定时发送到邮箱 
* **分析**模块新增了四大分析模型和自定义查询
  * \_\_[热图分析](features/analytics/heatmap/)，支持分析 Web/H5 页面、APP 的点击位置、点击元素热度分析
  * [分布分析](features/analytics/distribution.md)，分析某事件在不同节点上分布，比如洞察用户什么时间更愿意购买商品
  * [间隔分析](features/analytics/interval.md)，分析两个事件的时间间隔等
  * [属性分析](features/analytics/user-attribute.md)，可以根据用户的属性进行分析
  * [自定义查询](features/analytics/sql.md)，支持用户完全自定义查询满足现有分析模型无法支持的分析需求
* **分群**模块新增了分群的导出，支持将用户明细导出，再导入广告系统、CRM 系统等再次使用
* **运营**模块新增了多个短信通道
* **管理**模块新增了项目概览、埋点管理、用户数据权限控制、更多服务商接入
  * [项目概览](features/project-manegement/overview.md)支持了解项目 AppKey、回数情况、埋点情况等基础信息
  * [埋点方案](features/project-manegement/data-integration/schema.md)管理，支持集中管理埋点需求、设定异常数据处理规则、自动化校验等保证数据质量
  * 元数据管理中，新增事件标签、回数日期、基础数据指标等基础信息，支持分组查看和过滤条件
  * 成员管理中新增用户权限，支持设定指定成员查看指定的数据，满足数据安全性的需求
  * 服务集成配置中新增了多个短信通道（云集、乐信通、领驭、腾讯云）
* **企业平台管理**中新增了[安全设置](features/enterprise-management/an-quan-she-zhi.md)，支持企业根据内部安全规范自定义设置
* 新增了 C++ SDK 

#### **改进**

* 分析模块优化
  * 在每个分析模块中可以通过新建快速创建新的图表
  * 图表中日期添加了星期
  * 下载数据不再限制50条
  * 数据量过大导致超时时，自动开启抽样
  * 渠道分析中支持了气泡图
  * 优化了智能路径分析模型中的条件区域
  * 事件分析分析结果中的 URL 可以直接点击跳转到页面
* 运营模块优化了消息通知、邮件大数据量发送时的效率
* 分群模块优化了计算状态，当出现异常时可以手动刷新计算，支持导出数据
* 管理模块优化
  * 重新调整了导航结构，原元事件、事件属性等合并入元数据管理；可视化埋点、集成 SDK 等并入数据接入管理
  * 易观锆云作为方舟的数据服务商，用户可以自定义配置接入，当接入后可以在方舟的分群中查看分群偏好画像
  * 优化了自定义告警，支持更灵活的时间设置
* 优化了新用户未接入数据时的引导
* 优化了 UI 界面
* 持续的性能优化
* 增加运营模块短信通道

#### Bug 修复

* 修复了若干 bug

## 4.2.2  - 2019年05月09日

#### 新增

* 数据明细验证，可在产品内校验数据有效性
* 帐号安全策略设置，以提升系统安全性并且适应企业中帐号合规要求
* 支持修改项目名称、上传 LOGO、删除项目
* 支持 Lisence 激活、扩容、续期

#### 改进

* 服务端支持 NTP ，以避免因可能时间差异导致的数据不准
* 进行了一些稳定性方面的优化
* 优化了看板缓存，可以提高看板显示速度
* 现在表格支持拖动表头调整列宽了
* 现在用户列表显示时可以记住常用的列

## 4.1.1 - 2019年01月24日

#### 新增

* 新增了[短信推送](features/operation/sms.md)，支持自定义分群发送营销短信
* 新增了独立的 [Session 分析](features/analytics/session.md)模型，从事件分析当中独立出来，更便捷的分析用户连续的行为、不同频次或时长的用户分布；
* 新增了[监控告警](features/project-manegement/monitoring/monitoring.md)，支持自定义监控关键指标，当指标达到设定阈值时自动发送告警消息，查看异常情况

#### 优化

* 优化了漏斗计算的准确性，重复事件时提升到毫秒级别计算漏斗转化
* 优化了数据缓存，超过阀值自动强制刷新缓存数据
* 优化了自动登录时的体验

#### Bug 修复

* 修复了部分情况下用户属性上报缺失的情况

## 4.1.0 - 2019年01月08日

#### 新增

* 新增了[广告跟踪](features/operation/utm.md)的功能
  * 支持批量上传生成跟踪链接
  * 支持批量下载生成后的链接
  * 支持链接时同时生成带参数的二维码（可自定义 LOGO 和尺寸）
  * 单条创建支持下拉选择广告来源和媒介，也支持自定义来源和媒介
  * 单条创建时支持在当前页继续生成新的链接
  * 支持增加备注
  * 支持删除无效链接
  * 支持查看单条链接的指标表现
* 新增了预置分群：新访问用户 和 新注册用户 ，支持在各个分析模型中对比分析
* 新增了实验室（用于承载一些实验性功能）

#### 优化

* 优化了主导航，移入分析 、运营 和 管理 可以快速切换二级导航
* 拆分了[消息通知](features/operation/pushmessage.md)和[电子邮件](features/operation/email.md)  ，可以从二级导航进入，更方便管理和创建邮件
* 优化了分群推送时直接选择消息通知还是电子邮件
* 优化了点击图表元素时 popup 菜单位置，使得数据标签完整出现在可视范围内
* 优化了事件分析多个指标时默认的图表
* 优化了事件分析中数值型图表添加看板时 widget 可控制的大小
* 优化了元事件列表中不包含属性的事件行效果（去掉了箭头，不支持点击展开）
* 优化了小舟助手位置，使得不遮挡主功能
* 优化了按照平台维度细分时显示的维度值，变得更易读

#### SDK 和开放平台

* 新增了 PHP SDK
* SDK 首次访问时间 $first\_visit\_time 强制转化为东八区，方便数据统一处理
* 新增了 presto-kafka 插件，支持通过 presto 查询 kafka 中的数据
* 邮件发送服务支持 SSL

#### Bug 修复

* 修复了事件分析-自定义指标表格模式未显示单位的问题
* 修复了首次创建项目后，不刷新页面不显示进入产品的入口
* 修复了自定义指标分享给其他用户时，显示的为 code 而不是名称的问题
* 修复了数据中非广告系列的问题
* 修复了单机版无法启动数据流的问题
* 修复了部分情况下用户属性上报缺失的情况

